# MSA 실습을 위한 repository입니다.

- RUN
```
mvn clean package docker:build

docker-compose -f docker/common/docker-compose.yml up
```



## MSA 목표 : 원래는 모놀리식 스프링 애플리케이션 -> 클라우드에 배포 가능한 MSA로 마이그레이션 하겠다.

1. 모놀리식 애플리케이션은 각 팀에서 변경을 할 때마다, 애플리케이션 전체를 다시 빌드하고 테스트해 배포한다.

   - 모든 작업이 단일 코드 베이스에 동기화되기 때문이다.

2. MSA는 각각의 소스코드 저장소를 두고, 파이프라인을 독립적으로 구축한다. 

   각 팀이 서비스코드/인프라스트럭처를 완전히 소유한 셈이다.  각기 독립적으로 빌드/테스트/배포가 가능해진다. 

   1. MSA는 느슨하게 결합된 작은 분산서비스이다.
   2. 대형 애플리케이션 관리하기 쉽고
   3. 제한된 책임으로 컴포넌트를 분해할 수 있다.
   4. 따라서, 전통적 복잡성 문제를 해결한다.
   5. 모든 애플리케이션 기능들은 상호 독립적으로 동작할 것이다.



# 스프링부트

스프링의 핵심 기능 수용하되, 엔터프라이즈 기능 제거하고 자바 기반의 REST지향 마이크로서비스 프레임워크를 제공한다.

단순한 애너테이션으로 외부 애플리케이션 컨테이너 없이도 패키지 및 배포가 가능한 REST MSA를 신속히 구축할 수 있다.



# 견고한 서비스를 만드는 핵심

1. 클라이언트에 영향 주지 않고, 서비스 인스턴스르ㅡㄹ 추가 및 삭제할 물리적 위치 관리
2. 한가지 책임 영역에 집중하도록
3. 서비스간 의존성 최소화 하고 애플리케이션 신속히 확장
4. 서비스 문제있을때, 클라이언트가 '빨리 실패'하게 하는 방버
5. 인스턴스 새롭게 시작될때마다 기존 인스턴스와 동일한 코드와 구성으로 유지할 수 있도록 

따라서, 패턴이 필요하다.

1. 마이크로서비스 핵심 개발 패턴

2. 마이크로서비스 라우팅 패턴

3. 마이크로서비스 클라이언트 회복성 패턴

4. 마이크로서비스 보안 패턴 - 인증/ 깅ㄴ가/ 자격증명관리와 전파 

5. 마이크로서비스 로깅 및 추적 패턴 

   MSA 단점이 애플리케이션과 서비스안에서 어떤 일이 일어나는지 디버깅, 추적이 훨씬 어렵다. 

   1. 로그 상관관계 알아야
   2. 로그 수집해야
   3. 마이크로서비스 추적 필요

6. 마이크로서비스 빌드 맻 배포 패턴

   구성 편차를 줄여야 애플리케이션 안정성이 좋아진다. 



## 프로비저닝 구현

스프링 프레임워크는 개발에 맞추어져 있어, 빌드와 배포 파이프라인을 생성할 도구가 없다.

따라서, 빌드 도구용 Travis CI, Docker를 사용할 것이다. 



## 마이크로서비스 네가지 수명 주기 단계

1. 서비스 어셈블리
2. 서비스 부트스트래핑
3. 서비스 등록 및 디스커버리
4. 서비스 모니터링



